import{c as V}from"./BJlwRGmy.js";import{C as v,d as S,m as z,Y as U,k as j,A as D,c as I,o as _,a as l,t as r,f as n,e as t,w as a,g as q,i as w,n as O,u as s,p as H,q as W,_ as Y,r as G,s as J}from"./8QiH33WF.js";import{_ as K}from"./BET4E6RN.js";import{u as Q,T as X,_ as Z}from"./CChrxTUx.js";import{_ as tt}from"./DsNnbL9Z.js";import{t as ot,o as et,s as h,a as at,_ as st}from"./Cr4JGMLb.js";import{_ as rt}from"./C73mHSXW.js";import{_ as nt}from"./DSEaCN0s.js";import{_ as it}from"./CebZ4Rg0.js";import{u as mt}from"./q1OLa3wU.js";import{u as y}from"./B8ynWgUJ.js";import"./C3AzuWgF.js";import"./Brao1_R0.js";/**
 * @license lucide-vue-next v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ct=v("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),lt={class:"text-3xl font-bold"},_t={class:"mb-6 mt-2 text-muted-foreground"},pt=S({__name:"SaasForgotPasswordForm.client",setup($){const{apiCaller:i}=mt(),p=j(),{t:u}=y(),m=ot(et({root:h().optional(),email:h().email()})),{zodErrorMap:F,setApiErrorsToForm:P}=Q();at(F);const f=z({validationSchema:m,initialValues:{email:""}}),{handleSubmit:b,isSubmitting:T,errors:d}=f,g=b(async o=>{try{await i.auth.forgotPassword.mutate({email:o.email,callbackUrl:U(p.public.siteUrl,"/auth/verify")});const e=new URLSearchParams;e.set("type","PASSWORD_RESET"),o.email&&e.set("identifier",o.email),e.set("redirectTo","/app/settings/account/general"),D(`/auth/otp?${e.toString()}`,{replace:!0})}catch(e){P(e,f,{defaultError:u("auth.forgotPassword.hints.linkNotSent.message")})}});return(o,e)=>{const k=q,x=Z,C=K,A=rt,E=it,N=tt,B=nt,L=st,M=W,R=Y;return _(),I("div",null,[l("h1",lt,r(o.$t("auth.forgotPassword.title")),1),l("p",_t,[n(r(o.$t("auth.forgotPassword.message"))+" ",1),t(k,{to:"/auth/login",class:"text-gray-700"},{default:a(()=>[n(r(o.$t("auth.forgotPassword.backToSignin"))+" → ",1)]),_:1})]),l("form",{onSubmit:e[0]||(e[0]=G((...c)=>s(g)&&s(g)(...c),["prevent"])),class:"flex flex-col items-stretch gap-6"},[s(d).root?(_(),w(C,{key:0,variant:"error"},{default:a(()=>[t(s(X),{class:"size-6"}),t(x,null,{default:a(()=>[n(r(s(d).root),1)]),_:1})]),_:1})):O("",!0),t(M,{name:"email"},{default:a(({componentField:c})=>[t(L,null,{default:a(()=>[t(A,{for:"name",required:""},{default:a(()=>[n(r(o.$t("auth.forgotPassword.email")),1)]),_:1}),t(N,null,{default:a(()=>[t(E,H(c,{autocomplete:"email"}),null,16)]),_:2},1024),t(B)]),_:2},1024)]),_:1}),t(R,{loading:s(T),type:"submit"},{default:a(()=>[t(s(ct),{class:"mr-2 size-4"}),n(" "+r(o.$t("auth.forgotPassword.submit"))+" → ",1)]),_:1},8,["loading"])],32)])}}}),ut=V(pt),xt=S({__name:"forgot-password",setup($){const{t:i}=y();return J({title:i("auth.forgotPassword.title")}),(p,u)=>{const m=ut;return _(),w(m)}}});export{xt as default};
