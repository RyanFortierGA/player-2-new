import{c as q}from"./BJlwRGmy.js";import{_ as J}from"./BGJzcXPY.js";import{o as K,_ as W}from"./CdoZBVaK.js";import{_ as X}from"./BET4E6RN.js";import{u as ee,T as te,_ as ae}from"./CChrxTUx.js";import{_ as oe}from"./DsNnbL9Z.js";import{s as h,t as se,o as re,a as ne,_ as ie}from"./Cr4JGMLb.js";import{_ as me}from"./C73mHSXW.js";import{_ as ce}from"./DSEaCN0s.js";import{_ as ue}from"./CebZ4Rg0.js";import{d as E,j as le,k as pe,m as _e,l as de,Y as fe,A as he,c as x,o as u,a as c,i as _,n as A,t as i,u as s,F as ge,x as ve,e,w as o,f as l,p as P,q as $e,_ as ye,g as Se,r as we,s as be}from"./8QiH33WF.js";import{_ as Fe}from"./D0LHb9o-.js";import{u as ke}from"./q1OLa3wU.js";import{u as V}from"./B8ynWgUJ.js";import{u as f}from"./DYdusctJ.js";import"./C3AzuWgF.js";import"./Brao1_R0.js";const Te=h().min(8).max(255).refine(r=>/[A-Z]/.test(r),{params:{i18n:{key:"uppercase_character_required",values:{character:"A-Z"}}}}).refine(r=>/[a-z]/.test(r),{params:{i18n:{key:"lowercase_character_required",values:{character:"a-z"}}}}).refine(r=>/[0-9]/.test(r),{params:{i18n:{key:"number_required",values:{character:"0-9"}}}}).refine(r=>/[!@#$%^&*]/.test(r),{params:{i18n:{key:"special_character_required",values:{character:"!@#$%^&"}}}}),Ce=q(W),xe={class:"text-3xl font-bold"},Ae={class:"mb-6 mt-2 text-muted-foreground"},Pe={class:"grid grid-cols-1 items-stretch gap-4 md:grid-cols-2"},qe={class:"text-muted-foreground"},Ee=E({__name:"SaasSignupForm.client",setup(r){const p=pe(),{apiCaller:g}=ke(),{t:v}=V(),d=se(re({root:h().optional(),email:h().email(),password:Te})),{searchQuery:m}=f({name:"invitationCode",replace:!0}),{searchQuery:B}=f({name:"redirectTo",replace:!0}),{searchQuery:$}=f({name:"email",replace:!0}),I=le(()=>m.value?`/team/invitation?code=${m.value}`:B.value||p.public.auth.redirectPath),{zodErrorMap:N,setApiErrorsToForm:L}=ee();ne(N);const y=_e({validationSchema:d,initialValues:{email:"",password:""}}),{handleSubmit:U,setFieldValue:j,isSubmitting:z,values:M,errors:S}=y;de(()=>{$.value&&j("email",$.value)});const w=U(async t=>{try{await g.auth.signup.mutate({email:t.email,password:t.password,callbackUrl:fe(p.public.siteUrl,"/auth/verify")});const a=new URLSearchParams;a.set("type","SIGNUP"),a.set("redirectTo",I.value),m&&a.set("invitationCode",m.value),t.email&&a.set("identifier",t.email),he(`/auth/otp?${a.toString()}`,{replace:!0})}catch(a){L(a,y,{defaultError:v("auth.signup.hints.signupFailed.message")})}});return(t,a)=>{const Q=J,R=Ce,D=ae,H=X,b=me,O=ue,F=oe,k=ce,T=ie,C=$e,Z=Fe,G=ye,Y=Se;return u(),x("div",null,[c("h1",xe,i(t.$t("auth.signup.title")),1),c("p",Ae,i(t.$t("auth.signup.message")),1),s(m)?(u(),_(Q,{key:0,class:"mb-6"})):A("",!0),c("div",Pe,[(u(!0),x(ge,null,ve(Object.keys(s(K)),n=>(u(),_(R,{key:n,provider:n},null,8,["provider"]))),128))]),a[1]||(a[1]=c("hr",{class:"my-8"},null,-1)),c("form",{onSubmit:a[0]||(a[0]=we((...n)=>s(w)&&s(w)(...n),["prevent"])),class:"flex flex-col items-stretch gap-6"},[s(S).root?(u(),_(H,{key:0,variant:"error"},{default:o(()=>[e(s(te),{class:"size-6"}),e(D,null,{default:o(()=>[l(i(s(S).root),1)]),_:1})]),_:1})):A("",!0),e(C,{name:"email"},{default:o(({componentField:n})=>[e(T,null,{default:o(()=>[e(b,{for:"name",required:""},{default:o(()=>[l(i(t.$t("auth.signup.email")),1)]),_:1}),e(F,null,{default:o(()=>[e(O,P(n,{autocomplete:"email"}),null,16)]),_:2},1024),e(k)]),_:2},1024)]),_:1}),e(C,{name:"password"},{default:o(({componentField:n})=>[e(T,null,{default:o(()=>[e(b,{for:"password",required:""},{default:o(()=>[l(i(t.$t("auth.signup.password")),1)]),_:1}),e(F,null,{default:o(()=>[e(Z,P(n,{autocomplete:"new-password",required:""}),null,16)]),_:2},1024),e(k)]),_:2},1024)]),_:1}),e(G,{loading:s(z),type:"submit"},{default:o(()=>[l(i(t.$t("auth.signup.submit"))+" → ",1)]),_:1},8,["loading"]),c("p",null,[c("span",qe,i(t.$t("auth.signup.alreadyHaveAccount"))+" ",1),e(Y,{to:`/auth/login${s(m)?`?invitationCode=${s(m)}&email=${s(M).email}`:""}`},{default:o(()=>[l(i(t.$t("auth.signup.signIn"))+" → ",1)]),_:1},8,["to"])])],32)])}}}),Ve=q(Ee),Ke=E({__name:"signup",setup(r){const{t:p}=V();return be({title:p("auth.signup.title")}),(g,v)=>{const d=Ve;return u(),_(d)}}});export{Ke as default};
