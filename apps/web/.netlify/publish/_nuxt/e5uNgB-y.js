import{C as X,d as R,j as pt,i as D,o as $,u as n,Z as ft,p as j,E as ct,w as e,e as t,a0 as gt,a1 as vt,P as St,N as J,m as K,c as P,a as p,f as o,t as u,q as Y,_ as tt,a2 as bt,F as $t,H as V,I as h,n as Ct,A as B,z as q}from"./Di62MCsn.js";import{_ as et}from"./k_VxRW8y.js";import{_ as yt}from"./B8F9pV6U.js";import{t as at,o as ot,s as L,_ as nt,e as W}from"./COzg6gEF.js";import{_ as st}from"./rowDaywP.js";import{_ as lt}from"./N7ypjATh.js";import{_ as rt}from"./BCTRTFrT.js";import{_ as At}from"./BUYY8f_0.js";import{u as z}from"./DT-NqyXP.js";import{u as H}from"./CjtIy_jz.js";import{u as mt}from"./BBmSYT-e.js";import{_ as kt,a as xt,b as Tt,c as Nt,d as Ft}from"./DMYLyJLv.js";import{_ as It,b as Et,a as Ut}from"./BGlgn2PH.js";import{u as wt}from"./1xcXvCpP.js";import"./DFM8vr2N.js";import"./GVDJxUYS.js";import"./2Efy8mjX.js";import"./DaIKFIDr.js";import"./CbGp9S1z.js";import"./CD__X4GM.js";import"./CXFSimRl.js";import"./DJFGLJu-.js";import"./jjbrCQ32.js";/**
 * @license lucide-vue-next v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mt=X("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-vue-next v0.534.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const it=X("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),Rt=R({__name:"Progress",props:{modelValue:{default:0},max:{},getValueLabel:{},asChild:{type:Boolean},as:{},class:{}},setup(E){const l=E,r=pt(()=>{const{class:m,...i}=l;return i});return(m,i)=>($(),D(n(ft),j(n(r),{class:("cn"in m?m.cn:n(ct))("relative h-4 w-full overflow-hidden rounded-full bg-secondary",l.class)}),{default:e(()=>[t(n(gt),{class:"size-full flex-1 rounded-full bg-primary transition-all",style:vt(`transform: translateX(-${100-(l.modelValue??0)}%);`)},null,8,["style"])]),_:1},16,["class"]))}}),Ot=R({__name:"SaasOnboardingStep1",emits:["complete"],setup(E,{emit:l}){var x;const r=l,{apiCaller:m}=z(),{user:i}=H(),{t:S}=mt(),{toast:g}=St(),d=m.auth.update.useMutation(),A=at(ot({name:L().min(1)})),k=J(null),{isSubmitting:U,handleSubmit:C}=K({validationSchema:A,initialValues:{name:((x=i.value)==null?void 0:x.name)||""}}),v=C(async({name:_})=>{k.value=null;try{await d.mutate({name:_}),r("complete")}catch{k.value=S("onboarding.notifications.accountSetupFailed")}}),a=()=>{g({variant:"error",title:S("settings.notifications.avatarNotUpdated")})};return(_,f)=>{const O=st,T=rt,N=et,F=lt,y=nt,I=Y,w=yt,s=At,M=tt;return $(),P("div",null,[p("form",{onSubmit:f[1]||(f[1]=(...b)=>n(v)&&n(v)(...b)),class:"flex flex-col items-stretch gap-8"},[t(I,{name:"name"},{default:e(({componentField:b})=>[t(y,null,{default:e(()=>[t(O,{for:"name",required:""},{default:e(()=>[o(u(_.$t("onboarding.account.name")),1)]),_:1}),t(N,null,{default:e(()=>[t(T,j(b,{autocomplete:"name"}),null,16)]),_:2},1024),t(F)]),_:2},1024)]),_:1}),t(I,{name:"avatar"},{default:e(()=>[t(y,{class:"flex items-center gap-4"},{default:e(()=>[p("div",null,[t(O,{for:"name",required:""},{default:e(()=>[o(u(_.$t("onboarding.account.avatar")),1)]),_:1}),t(w,null,{default:e(()=>[o(u(_.$t("onboarding.account.avatarDescription")),1)]),_:1})]),t(s,{onError:f[0]||(f[0]=b=>a())})]),_:1})]),_:1}),t(M,{type:"submit",loading:n(U)},{default:e(()=>[o(u(_.$t("onboarding.continue"))+" ",1),t(n(it),{class:"ml-2 size-4"})]),_:1},8,["loading"])],32)])}}}),Dt={key:0,class:"flex flex-col items-stretch gap-4"},Pt={class:"text-xl font-bold"},zt={class:"text-muted-foreground"},Vt={class:"mb-4 text-xl font-bold"},ht={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},qt={class:"flex gap-2"},Bt=R({__name:"SaasOnboardingStep2",emits:["complete","back"],setup(E,{emit:l}){const r=l,{apiCaller:m}=z(),{t:i}=mt(),{user:S}=H(),g=m.team.create.useMutation(),d=at(ot({teamName:L().min(1,"Name is required"),teamSize:W(["2","4"]).default("4"),region:W(["US_EAST","US_WEST","EUROPE","ASIA","AU_NZ","SOUTH_AMERICA","AFRICA"]).default("US_EAST"),averagePeakRank:L().optional()})),A=J(null),{isSubmitting:k,handleSubmit:U}=K({validationSchema:d,initialValues:{teamName:"",teamSize:"4",region:"US_EAST",averagePeakRank:""}}),C=U(async({teamName:v,teamSize:a,region:x,averagePeakRank:_})=>{A.value=null;try{await g.mutate({name:v,teamSize:a,region:x,averagePeakRank:_}),r("complete")}catch{A.value=i("onboarding.notifications.teamSetupFailed")}});return(v,a)=>{var Z,Q;const x=bt("CheckIcon"),_=tt,f=st,O=rt,T=et,N=lt,F=nt,y=Y,I=Tt,w=xt,s=Ft,M=Nt,b=kt,ut=Et,_t=Ut,dt=It;return(Q=(Z=n(S))==null?void 0:Z.teamMemberships)!=null&&Q.length?($(),P("div",Dt,[p("h3",Pt,u(n(i)("onboarding.team.joinTeam")),1),p("p",zt,u(v.$t("onboarding.team.joinTeamDescription",{teamName:n(S).teamMemberships[0].team.name})),1),t(_,{onClick:a[0]||(a[0]=c=>r("complete"))},{default:e(()=>[t(x,{class:"mr-2 size-4"}),o(" "+u(n(i)("onboarding.complete")),1)]),_:1})])):($(),P($t,{key:1},[p("h3",Vt,u(n(i)("onboarding.team.title")),1),p("form",{onSubmit:a[2]||(a[2]=(...c)=>n(C)&&n(C)(...c)),class:"flex flex-col items-stretch gap-8"},[t(y,{name:"teamName"},{default:e(({componentField:c})=>[t(F,null,{default:e(()=>[t(f,{for:"teamName",required:""},{default:e(()=>[o(u(v.$t("onboarding.team.name")),1)]),_:1}),t(T,null,{default:e(()=>[t(O,j(c,{autocomplete:"company"}),null,16)]),_:2},1024),t(N)]),_:2},1024)]),_:1}),p("div",ht,[t(y,{name:"teamSize"},{default:e(({componentField:c})=>[t(F,null,{default:e(()=>[t(f,{required:""},{default:e(()=>a[3]||(a[3]=[o("Format")])),_:1,__:[3]}),t(T,null,{default:e(()=>[t(b,V(h(c)),{default:e(()=>[t(w,null,{default:e(()=>[t(I,{placeholder:"Select format"})]),_:1}),t(M,null,{default:e(()=>[t(s,{value:"2"},{default:e(()=>a[4]||(a[4]=[o("2v2")])),_:1,__:[4]}),t(s,{value:"4"},{default:e(()=>a[5]||(a[5]=[o("4v4")])),_:1,__:[5]})]),_:1})]),_:2},1040)]),_:2},1024),t(N)]),_:2},1024)]),_:1}),t(y,{name:"region"},{default:e(({componentField:c})=>[t(F,null,{default:e(()=>[t(f,{required:""},{default:e(()=>a[6]||(a[6]=[o("Region")])),_:1,__:[6]}),t(T,null,{default:e(()=>[t(b,V(h(c)),{default:e(()=>[t(w,null,{default:e(()=>[t(I,{placeholder:"Select region"})]),_:1}),t(M,null,{default:e(()=>[t(s,{value:"US_EAST"},{default:e(()=>a[7]||(a[7]=[o("US East")])),_:1,__:[7]}),t(s,{value:"US_WEST"},{default:e(()=>a[8]||(a[8]=[o("US West")])),_:1,__:[8]}),t(s,{value:"EUROPE"},{default:e(()=>a[9]||(a[9]=[o("Europe")])),_:1,__:[9]}),t(s,{value:"ASIA"},{default:e(()=>a[10]||(a[10]=[o("Asia")])),_:1,__:[10]}),t(s,{value:"AU_NZ"},{default:e(()=>a[11]||(a[11]=[o("Australia/NZ")])),_:1,__:[11]}),t(s,{value:"SOUTH_AMERICA"},{default:e(()=>a[12]||(a[12]=[o("South America")])),_:1,__:[12]}),t(s,{value:"AFRICA"},{default:e(()=>a[13]||(a[13]=[o("Africa")])),_:1,__:[13]})]),_:1})]),_:2},1040)]),_:2},1024),t(N)]),_:2},1024)]),_:1}),t(y,{name:"averagePeakRank"},{default:e(({componentField:c})=>[t(F,null,{default:e(()=>[t(f,null,{default:e(()=>[a[16]||(a[16]=o(" Average team peak rank ")),t(dt,null,{default:e(()=>[t(ut,{asChild:""},{default:e(()=>[t(_,{variant:"ghost",size:"icon",class:"ml-1 h-5 w-5 p-0 text-muted-foreground"},{default:e(()=>a[14]||(a[14]=[o("?")])),_:1,__:[14]})]),_:1}),t(_t,{class:"max-w-xs text-sm"},{default:e(()=>a[15]||(a[15]=[o(" This is your team's overall average of each member's highest rank. For example, two Diamond 3s and two Crimson 2s ≈ Crimson 1. Please don't sandbag — this is meant to be fun but competitive. ")])),_:1,__:[15]})]),_:1})]),_:1,__:[16]}),t(T,null,{default:e(()=>[t(b,V(h(c)),{default:e(()=>[t(w,null,{default:e(()=>[t(I,{placeholder:"Select rank"})]),_:1}),t(M,null,{default:e(()=>[t(s,{value:"GOLD"},{default:e(()=>a[17]||(a[17]=[o("Gold")])),_:1,__:[17]}),t(s,{value:"PLATINUM"},{default:e(()=>a[18]||(a[18]=[o("Platinum")])),_:1,__:[18]}),t(s,{value:"DIAMOND_1"},{default:e(()=>a[19]||(a[19]=[o("Diamond 1")])),_:1,__:[19]}),t(s,{value:"DIAMOND_2"},{default:e(()=>a[20]||(a[20]=[o("Diamond 2")])),_:1,__:[20]}),t(s,{value:"DIAMOND_3"},{default:e(()=>a[21]||(a[21]=[o("Diamond 3")])),_:1,__:[21]}),t(s,{value:"CRIMSON_1"},{default:e(()=>a[22]||(a[22]=[o("Crimson 1")])),_:1,__:[22]}),t(s,{value:"CRIMSON_2"},{default:e(()=>a[23]||(a[23]=[o("Crimson 2")])),_:1,__:[23]}),t(s,{value:"CRIMSON_3"},{default:e(()=>a[24]||(a[24]=[o("Crimson 3")])),_:1,__:[24]}),t(s,{value:"IRIDESCENT"},{default:e(()=>a[25]||(a[25]=[o("Iridescent")])),_:1,__:[25]})]),_:1})]),_:2},1040)]),_:2},1024),t(N)]),_:2},1024)]),_:1})]),p("div",qt,[t(_,{type:"button",variant:"outline",onClick:a[1]||(a[1]=c=>v.$emit("back")),class:"flex-1"},{default:e(()=>[t(n(Mt),{class:"mr-2 size-4"}),o(" "+u(v.$t("onboarding.back")),1)]),_:1}),t(_,{type:"submit",loading:n(k),class:"flex-1"},{default:e(()=>[o(u(v.$t("onboarding.continue"))+" ",1),t(n(it),{class:"ml-2 size-4"})]),_:1},8,["loading"])])],32)],64))}}}),Lt={class:"text-3xl font-bold"},jt={class:"text-muted-foreground mb-6 mt-2"},Ht={class:"mb-6 flex items-center gap-3"},Zt={class:"text-muted-foreground shrink-0 text-xs"},G=2,Qt=R({__name:"SaasOnboardingForm",setup(E){const{apiCaller:l}=z(),{reloadUser:r}=H(),{searchQuery:m}=wt({name:"step",replace:!0,defaultValue:"1"}),i=g=>{m.value=String(g)},S=async()=>{try{await l.auth.update.mutate({onboardingComplete:!0}),await r(),B("/app/dashboard",{replace:!0})}catch{}};return(g,d)=>{const A=Rt,k=Ot,U=Bt;return $(),P("div",null,[p("h1",Lt,u(g.$t("onboarding.title")),1),p("p",jt,u(g.$t("onboarding.message")),1),p("div",Ht,[t(A,{"model-value":Number(n(m))/G*100,class:"h-2"},null,8,["model-value"]),p("span",Zt,u(g.$t("onboarding.step",{step:n(m),total:G})),1)]),Number(n(m))===1?($(),D(k,{key:0,onComplete:d[0]||(d[0]=C=>i(2))})):Number(n(m))===2?($(),D(U,{key:1,onBack:d[1]||(d[1]=C=>i(1)),onComplete:d[2]||(d[2]=C=>S())})):Ct("",!0)])}}}),ve=R({__name:"onboarding",async setup(E){let l,r;const{apiCaller:m}=z(),{data:i}=([l,r]=q(()=>m.auth.user.useQuery()),l=await l,r(),l);return i.value||([l,r]=q(()=>B("/auth/login")),await l,r()),i.value.onboardingComplete&&([l,r]=q(()=>B("/app/dashboard")),await l,r()),(S,g)=>{const d=Qt;return $(),D(d)}}});export{ve as default};
